<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservations - Desi Delight</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <h1 class="logo">Desi Delight</h1>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="menu.html">Menu</a></li>
                <li><a href="reservations.html">Reservations</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
            <div class="cart-icon">
                ðŸ›’ <span id="cart-count">0</span>
            </div>
        </div>
    </nav>

    <div class="form-container">
        <h2>Make a Reservation</h2>
        <form id="reservation-form">
            <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" name="name" required>
            </div>
            
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required>
            </div>
            
            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" name="phone" required>
            </div>
            
            <div class="form-group">
                <label for="date">Date</label>
                <input type="date" id="date" name="date" required>
            </div>
            
            <div class="form-group">
                <label for="time">Time</label>
                <input type="time" id="time" name="time" required>
            </div>
            
            <div class="form-group">
                <label for="guests">Number of Guests</label>
                <select id="guests" name="guests" required>
                    <option value="1">1 Person</option>
                    <option value="2">2 People</option>
                    <option value="3">3 People</option>
                    <option value="4">4 People</option>
                    <option value="5">5 People</option>
                    <option value="6">6+ People</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="special-requests">Special Requests</label>
                <textarea id="special-requests" name="special_requests" rows="4" placeholder="Any dietary restrictions or special requirements..."></textarea>
            </div>
            
            <button type="submit" class="submit-btn">Make Reservation</button>
        </form>
    </div>

    <script>
        // Cart functionality
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            updateCartCount();
            
            // Add event listeners
            const cartIcon = document.querySelector('.cart-icon');
            if (cartIcon) {
                cartIcon.addEventListener('click', openCart);
            }
            
            // Handle reservation form submission
            const reservationForm = document.getElementById('reservation-form');
            if (reservationForm) {
                reservationForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    submitReservation(this);
                });
            }
        });

        // Update cart count
        function updateCartCount() {
            const cartCount = document.getElementById('cart-count');
            if (cartCount) {
                const totalItems = cart.reduce((sum, item) => sum + (item.quantity || 0), 0);
                cartCount.textContent = totalItems;
            }
        }

        // Open cart sidebar
        function openCart() {
            // Redirect to menu page or show cart modal
            window.location.href = 'menu.html';
        }

        // Enhanced royal notification system
        function showRoyalNotification(message, type = 'success') {
            const notification = document.createElement('div');
            const bgColor = type === 'success' ? '#27ae60' : type === 'warning' ? '#e74c3c' : '#4a2c8d';
            
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(135deg, ${bgColor} 0%, #2c1a4d 100%);
                color: white;
                padding: 1.5rem 2rem;
                border-radius: 15px;
                z-index: 1002;
                animation: slideIn 0.3s ease;
                box-shadow: 0 8px 25px rgba(0,0,0,0.3);
                font-weight: bold;
                border: 2px solid #d4af37;
                max-width: 300px;
                font-size: 1rem;
                line-height: 1.4;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 1.5rem;">ðŸ‘‘</span>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }

        // Submit reservation form
        function submitReservation(form) {
            // Get form data
            const formData = new FormData(form);
            const data = {
                name: formData.get('name'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                date: formData.get('date'),
                time: formData.get('time'),
                guests: formData.get('guests'),
                special_requests: formData.get('special_requests')
            };

            // Basic validation
            if (!data.name || !data.email || !data.phone || !data.date || !data.time || !data.guests) {
                showRoyalNotification('Please fill in all required fields!', 'warning');
                return;
            }

            // Validate date (cannot be in the past)
            const selectedDate = new Date(data.date);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            if (selectedDate < today) {
                showRoyalNotification('Please select a future date for your reservation!', 'warning');
                return;
            }

            // Show loading state
            const submitBtn = form.querySelector('.submit-btn');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Making Reservation...';
            submitBtn.disabled = true;

            // Simulate API call (replace with actual backend integration)
            setTimeout(() => {
                // Save to localStorage (for demo purposes)
                const reservations = JSON.parse(localStorage.getItem('reservations')) || [];
                reservations.push({
                    ...data,
                    id: Date.now(),
                    timestamp: new Date().toISOString()
                });
                localStorage.setItem('reservations', JSON.stringify(reservations));

                // Show success message
                showRoyalNotification(`Reservation confirmed for ${data.guests} guests on ${data.date} at ${data.time}! We look forward to serving you! ðŸ‘‘`);

                // Reset form
                form.reset();

                // Restore button
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;

                // Optional: Redirect to confirmation page
                // window.location.href = 'reservation-confirmation.html';

            }, 2000);
        }

        // Add CSS for animations
        const royalStyles = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            
            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }

            .submit-btn:disabled {
                opacity: 0.7;
                cursor: not-allowed;
            }

            .submit-btn {
                transition: all 0.3s ease;
            }

            .submit-btn:not(:disabled):hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(212, 175, 55, 0.4);
            }
        `;

        // Inject royal styles
        const styleSheet = document.createElement('style');
        styleSheet.textContent = royalStyles;
        document.head.appendChild(styleSheet);
    </script>
</body>
</html>